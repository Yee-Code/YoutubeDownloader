<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:vm="using:YoutubeDownloader.UI.ViewModels"
        mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="300"
        x:Class="YoutubeDownloader.UI.Views.SettingsWindow"
        x:DataType="vm:MainWindowViewModel"
        x:Name="SettingsRoot"
        Title="Settings"
        Width="450" Height="400"
        MinWidth="400" MinHeight="300"
        WindowStartupLocation="CenterOwner"
        CanResize="True"
        TransparencyLevelHint="AcrylicBlur"
        Background="Transparent"
        ExtendClientAreaToDecorationsHint="True">

    <Window.KeyBindings>
        <KeyBinding Gesture="Ctrl+W" Command="{Binding CloseWindowCommand}" CommandParameter="{Binding #SettingsRoot}" />
        <KeyBinding Gesture="Escape" Command="{Binding CloseWindowCommand}" CommandParameter="{Binding #SettingsRoot}" />
    </Window.KeyBindings>

    <NativeMenu.Menu>
        <NativeMenu>
            <NativeMenuItem Header="File">
                <NativeMenu>
                    <NativeMenuItem Header="Close" Gesture="Cmd+W" Click="OnCloseClicked"/>
                </NativeMenu>
            </NativeMenuItem>
        </NativeMenu>
    </NativeMenu.Menu>

    <Panel>
        <ExperimentalAcrylicBorder IsHitTestVisible="False">
            <ExperimentalAcrylicBorder.Material>
                <ExperimentalAcrylicMaterial
                    BackgroundSource="Digger"
                    TintColor="Black"
                    TintOpacity="1"
                    MaterialOpacity="0.85" />
            </ExperimentalAcrylicBorder.Material>
        </ExperimentalAcrylicBorder>

        <Grid RowDefinitions="Auto, *" Margin="20">
            <TextBlock Grid.Row="0" Text="Settings" 
                       FontSize="20" FontWeight="Bold" 
                       HorizontalAlignment="Center" Margin="0,10,0,20"
                       Foreground="White"/>

            <ScrollViewer Grid.Row="1" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="15">
                    <!-- Dependency Logs -->
                    <CheckBox Content="Enable Dependency Logs" 
                              IsChecked="{Binding EnableDependencyLog}"
                              Foreground="White"/>
                    <TextBlock Text="Detailed logs from ffmpeg/yt-dlp checks will be shown in the main log window if enabled."
                               TextWrapping="Wrap"
                               FontSize="12"
                               Foreground="#AAAAAA"
                               Margin="0,0,0,10"/>

                    <!-- Default Download Path -->
                    <StackPanel Spacing="5">
                        <TextBlock Text="Default Download Path:" FontWeight="SemiBold" Foreground="White"/>
                        <TextBox Text="{Binding DownloadPath}" Watermark="Download path..." Classes="clearButton"/>
                    </StackPanel>

                    <!-- Window Size -->
                    <StackPanel Spacing="5">
                        <TextBlock Text="Window Size:" FontWeight="SemiBold" Foreground="White"/>
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                            <StackPanel Grid.Column="0" Spacing="5">
                                <TextBlock Text="Width:" Foreground="White"/>
                                <NumericUpDown Value="{Binding WindowWidth}" Minimum="400" Maximum="3840" Increment="10" FormatString="F0"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1" Spacing="5">
                                <TextBlock Text="Height:" Foreground="White"/>
                                <NumericUpDown Value="{Binding WindowHeight}" Minimum="300" Maximum="2160" Increment="10" FormatString="F0"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>

                    <!-- Window Position -->
                    <StackPanel Spacing="5">
                        <TextBlock Text="Window Position:" FontWeight="SemiBold" Foreground="White"/>
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                            <StackPanel Grid.Column="0" Spacing="5">
                                <TextBlock Text="X Position:" Foreground="White"/>
                                <NumericUpDown Value="{Binding WindowX}" Minimum="-1" Maximum="7680" Increment="10" FormatString="F0"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1" Spacing="5">
                                <TextBlock Text="Y Position:" Foreground="White"/>
                                <NumericUpDown Value="{Binding WindowY}" Minimum="-1" Maximum="4320" Increment="10" FormatString="F0"/>
                            </StackPanel>
                        </Grid>
                        <TextBlock Text="(-1 means default/center position)" FontSize="11" Foreground="Gray"/>
                    </StackPanel>

                    <Button Content="Save &amp; Close" 
                            Command="{Binding CloseWindowCommand}" 
                            CommandParameter="{Binding #SettingsRoot}"
                            HorizontalAlignment="Right"
                            Margin="0,10,0,0"/>

                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Panel>
</Window>
